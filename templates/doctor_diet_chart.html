{% extends "layout.html" %}

{% block title %}
    Diet Chart Management - Vedyura
{% endblock %}

{% block content %}
<header class="dashboard-header">
    <nav class="navbar">
        <div class="navbar-logo">
            <a href="{{ url_for('doctor_dashboard') }}">
                <a href="{{ url_for('home') }}"><img src="{{ url_for('static', filename='images/vedyura_logo.png') }}" alt="Vedyura Logo" class="logo-img"></a>
            </a>
        </div>
        <div class="navbar-links">
            <a href="{{ url_for('doctor_dashboard') }}">Home</a>
            <a href="{{ url_for('doctor_patient_requests') }}">Patient Requests</a>
            <a href="{{ url_for('doctor_diet_chart') }}" class="active">Diet Chart</a>
            <a href="{{ url_for('contact_us') }}">Contact Us</a>
            <a href="{{ url_for('doctor_profile') }}">Profile</a>
        </div>
        <div class="navbar-action">
             <button id="dark-mode-toggle" class="dark-mode-button">Toggle Dark Mode</button>
        </div>
    </nav>
</header>

<main class="page-content dashboard-content">
    <div class="dashboard-container">
        <section class="page-header">
            <h1>Create & Manage Diet Charts</h1>
            <p>Build a personalized Ayurvedic diet plan for your patients.</p>
        </section>

        <div class="diet-chart-container">
            <div class="patient-info-column">
                <div class="card">
                    <h3>Patient's Self-Diagnosis Info</h3>
                    {% if patient_info %}
                        <div class="info-section">
                            <strong>Name:</strong> {{ patient_info.name }}
                        </div>
                        <div class="info-section">
                            <strong>Age:</strong> {{ patient_info.age }}
                        </div>
                        <div class="info-section">
                            <strong>Gender:</strong> {{ patient_info.gender }}
                        </div>
                        <div class="info-section">
                            <strong>Dominant Dosha:</strong> {{ patient_info.dominant_dosha }}
                        </div>
                        <div class="info-section">
                            <strong>Health Goals:</strong> {{ patient_info.health_goals }}
                        </div>
                        <div class="info-section">
                            <strong>Dietary Preferences:</strong> {{ patient_info.dietary_preferences }}
                        </div>
                        <div class="info-section">
                            <strong>Allergies:</strong> {{ patient_info.allergies }}
                        </div>
                    {% else %}
                        <p>Select a patient to view their information.</p>
                    {% endif %}
                </div>
            </div>
            <div class="diet-chart-creator-column">
                <div class="card diet-chart-creator">
                    <form action="{{ url_for('generate_doctor_diet_chart_pdf') }}" method="POST">
                        <input type="hidden" name="patient_id" value="{{ patient_info.id if patient_info else '' }}">
                        
                        <section class="diet-plan-section">
                            <h3>Create One-Day Meal Plan</h3>
                            <table class="diet-table">
                                <thead>
                                    <tr>
                                        <th>Meal</th>
                                        <th>Food Items</th>
                                        <th>Advice</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Breakfast</td>
                                        <td><textarea name="breakfast_items" placeholder="e.g., Poha, Upma"></textarea></td>
                                        <td><textarea name="breakfast_advice" placeholder="e.g., Light and easy to digest"></textarea></td>
                                    </tr>
                                    <tr>
                                        <td>Lunch</td>
                                        <td><textarea name="lunch_items" placeholder="e.g., Roti, Sabzi, Dal"></textarea></td>
                                        <td><textarea name="lunch_advice" placeholder="e.g., Include all 6 tastes"></textarea></td>
                                    </tr>
                                    <tr>
                                        <td>Dinner</td>
                                        <td><textarea name="dinner_items" placeholder="e.g., Khichdi, Soup"></textarea></td>
                                        <td><textarea name="dinner_advice" placeholder="e.g., Light and early dinner"></textarea></td>
                                    </tr>
                                    <tr>
                                        <td>Snacks</td>
                                        <td><textarea name="snacks_items" placeholder="e.g., Fruits, Nuts"></textarea></td>
                                        <td><textarea name="snacks_advice" placeholder="e.g., Avoid fried snacks"></textarea></td>
                                    </tr>
                                </tbody>
                            </table>
                        </section>

                        <section class="professional-advice-section">
                            <h3>Professional Advice</h3>
                            <div class="form-group">
                                <textarea name="professional_advice" placeholder="e.g., Drink warm water throughout the day..."></textarea>
                            </div>
                        </section>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Download as PDF</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}
